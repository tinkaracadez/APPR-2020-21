---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Tinkara Čadež"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
runtime: shiny
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Analizirala bom rodnost oziroma število živorojenih otrok v Sloveniji in jo primerjava z ostalimi državami EU. Za zadnjih 10 let bom za različne spremenjivke natančneje analizirala število živorojenih otrok v Sloveniji (osredotočila se bom predvsem na rojstva glede na regije, mesec in dan rojstva), nato pa za širše časovno obdobje primerjala samo število rojstev v Sloveniji v primerjavi z evropskimi državami.

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.R", encoding="UTF-8")
```

Podatke sem pridobila na statističnem uradu Republike Slovenije in na Eurostatu. Večina jih je v obliki CSV, ena pa v obliki HTML. Urejeni podatki so shranjeni v štirih tabelah.

1. `evropa` - podatki o številu rojstev za evropske države
  - `drzava` - spremenljivka: ime države (niz),
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `rojeni` - meritev: število živorojenih otrok v posamezni državi (število).
  
<<<<<<< HEAD
Prvi graf podaja osnovni pogled v število živorojenih otrok v evropskih državah za obravnavano obdobje (ponekod so vidne luknje, saj podatki niso bili na voljo).
=======
Tabela ni v obliki *tidy data*.

2. `St_rojenih_SLO_meseci` - podatki o številu rojstev za posamezne mesece v obdobju 2014-2018
  - `mesec` - spremenljivka: ime meseca (faktor),
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `rojeni` - meritev: število živorojenih otrok v Sloveniji na določen mesec določenega leta (število).
  
Tabela ni v obliki *tidy data*.

3. `St_rojenih_SLO_dnevi` - podatki o številu rojstev za posamezne dneve v mesecih v obdobju 2014-2018
  - `mesec` - spremenljivka: ime meseca za leta 2009-2018 (faktor),
  - `dan` - spremenljivka: dan v mesecu (število),
  - `rojeni` - meritev: število živorojenih otrok v Sloveniji na določen dan določenega meseca v letih 2014-2018 (število).
>>>>>>> 2cc9524757fab4958276a1eebecd3b3cbdf74d9f
  
```{r graf3, fig.align='center'}
evropa %>%
  ggplot(aes(x=leto, y=rojeni, group=drzava, color=drzava)) +
  geom_point() +
  ggtitle("Število živorojenih otrok v evropskih državah med letoma 2009 in 2018") +
  xlab("leto") +
  ylab("število živorojenih otrok")
```

<<<<<<< HEAD
Sledi malo lepši prikaz, a le za leto 2018.
=======
4. `St_rojenih_SLO_obcine` - podatki o številu rojstev v statističnih regijah med letoma 2014 in 2018
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `regija` - spremenljivka: ime statistične regije (faktor),
  - `rojeni` - meritev: število živorojenih otrok v statistični regije v določenem letu (število).
  
Tabela je v formatu HTML in ni v obliki *tidy data*.

5. `St_rojenih_SLO_matere` - podatki o številu rojstev med letoma 2014 in 2018 glede na starost in izobrazbo matere ter vrstni red rojstva
  - `starost` - spremenljivka: starostna skupina matere (faktor),
  - `izobrazba` - spremenljivka: stopnja izobrazbe matere (faktor),
  - `rojstvo` - spremenljivka: vrstni red rojstva (faktor),
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `rojeni` - meritev: št živorojenih otrok glede na spremenljivke (število).
  
Tabela ni v obliki *tidy data*.

6. `St_rojenih_SLO_zveza` - podatki o številu rojstev med letoma 2014 in 2018 glede na zakonsko zvezo med staršema
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `starost` - spremenljivka: starostna skupina matere (faktor),
  - `rojstvo` - spremenljivka: vrstni red rojstva (faktor),
  - `zveza` - spremenljivka: zveza med staršema - zakonska/zunajzakonska (faktor),
  - `rojeni` - meritev: št živorojenih otrok glede na spremenljivke (število).
  
Tabela ni v obliki *tidy data*.
>>>>>>> 2cc9524757fab4958276a1eebecd3b3cbdf74d9f

```{r graf4, fig.align='center'}
evropa %>%
  filter(leto==2018) %>%
  ggplot(aes(x=rojeni, y=drzava)) +
  geom_bar(stat="identity") +
  ggtitle("Število živorojenih otrok v evropskih državah leta 2018") +
  xlab("število živorojenih otrok") +
  ylab("država")
```

**Ugotovitve**: Tu so podatki predstavljeni zelo nepregledno (zaradi velikega števila le-teh). V nadaljevanju bom poiskala čimboljši način za vizualizacijo tovrstnih podatkov.

2. `meseci` - podatki o številu živorojenih otrok po mesecih v obdobju 2009-2018 za Slovenijo
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `mesec` - spremenljivka: ime meseca (niz),
  - `rojeni` - meritev: število živorojenih otrok v Sloveniji na določen mesec določenega leta (število).

3. `dnevi` - podatki o številu živorojenih otrok po dnevih v mesecih v obdobju 2014-2018 za Slovenijo
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `mesec` - spremenljivka: zaporedna številka meseca (število),
  - `dan` - spremenljivka: dan v mesecu (število),
  - `rojeni` - meritev: število živorojenih otrok v Sloveniji na določen dan določenega meseca v letih 2009-2018 (število).
  
4. `regije` - podatki o številu živorojenih otrok po statističnih regijah med letoma 2009 in 2018 za Slovenijo
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `regija` - spremenljivka: ime statistične regije (niz),
  - `rojeni` - meritev: število živorojenih otrok v statistični regiji v določenem letu (število).

V naslednjem grafu je po letih prikazano število živorojenih otrok v statističnih regijah Slovenije.

```{r graf1, fig.align='center'}
regije %>%
  ggplot(aes(x=leto, y=rojeni, fill=regija)) +
  geom_bar(stat="identity", position=position_dodge(width=0.5)) + 
  ggtitle("Število živorojenih otrok po statističnih regijah med letoma 2009 in 2018") +
  xlab("leto") +
  ylab("število živorojenih otrok") +
  labs(fill="Statistična regija") +
  scale_fill_brewer(palette="Set3")
```

Sledi še mnogo bolj pregleden graf, ki prikazuje enake podatke, a le za leto 2018.

```{r graf2, fig.align='center'}
regije %>%
  filter(leto==2018) %>%
  ggplot(aes(x=rojeni, y=regija)) +
  geom_bar(stat="identity") +
  ggtitle("Število živorojenih otrok po statističnih regijah leta 2018") +
  ylab("statistična regija") +
  xlab("število živorojenih otrok")
```

**Ugotovitve**: Tako veliko količino podatkov je težko prikazati na razumljiv in pregleden način. Ugotoviti moram še, kako bolje "nadzorovati" vrednosti, ki so izpisane na posameznih oseh. Trenutni grafi služijo bolj osnovnemu pregledu.





***

# Analiza in vizualizacija podatkov

***

# Napredna analiza podatkov

***
