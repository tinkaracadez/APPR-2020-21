---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Tinkara Čadež"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
---

```{r setup, echo=FALSE, results='hide', message=FALSE, warning=FALSE}
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE)

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding="UTF-8")
```

```{r rstudio, results='asis'}
# Izris povezave do RStudia na Binderju
source("lib/rstudio.r", encoding="UTF-8")
```

# Izbira teme

Analizirala bom rodnost oziroma število živorojenih otrok v Sloveniji in jo primerjala z ostalimi državami EU. Za zadnjih 10 let bom za različne spremenjivke natančneje analizirala število živorojenih otrok v Sloveniji (osredotočila se bom predvsem na rojstva glede na regije, mesec in dan rojstva), nato pa za širše časovno obdobje primerjala samo število rojstev v Sloveniji v primerjavi z evropskimi državami.

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz}
source("uvoz/uvoz.R", encoding="UTF-8")
```

Podatke sem pridobila na statističnem uradu Republike Slovenije in na Eurostatu. Večina jih je v obliki CSV, ena pa v obliki HTML. Urejeni podatki so shranjeni v štirih tabelah.

1. `evropa` - podatki o številu rojstev za evropske države
  - `drzava` - spremenljivka: ime države (niz),
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `rojeni` - meritev: število živorojenih otrok v posamezni državi (število).


2. `meseci` - podatki o številu živorojenih otrok po mesecih v obdobju 2009-2018 za Slovenijo
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `mesec` - spremenljivka: ime meseca (niz),
  - `rojeni` - meritev: število živorojenih otrok v Sloveniji na določen mesec določenega leta (število).

3. `dnevi` - podatki o številu živorojenih otrok po dnevih v mesecih v obdobju 2014-2018 za Slovenijo
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `mesec` - spremenljivka: zaporedna številka meseca (število),
  - `dan` - spremenljivka: dan v mesecu (število),
  - `rojeni` - meritev: število živorojenih otrok v Sloveniji na določen dan določenega meseca v letih 2009-2018 (število).
  
4. `regije` - podatki o številu živorojenih otrok po statističnih regijah med letoma 2009 in 2018 za Slovenijo
  - `leto` - spremenljivka: leto v obdobju 2009-2018 (število),
  - `regija` - spremenljivka: ime statistične regije (niz),
  - `rojeni` - meritev: število živorojenih otrok v statistični regiji v določenem letu (število).


# Analiza in vizualizacija podatkov

```{r vizualizacija, results='hide'}
source("vizualizacija/vizualizacija.r", encoding="UTF-8")
```

Zemljevid prikazuje število rojstev v posameznih slovenskih regijah za leto 2018. Razvidno je, da je bilo največ otrok rojenih v Osrednjeslovenski in Podravski regiji, najmanj pa v Zasavski, Koroški in Primorsko-notranjski regiji. Veliko število v prvih dveh regijah sem tudi pričakovala, saj sta to eni izmed največjih slovenskih regij, prav tako pa se tam nahajata naši največji mesti in je zato poselitev zelo gosta. Prav gostota poselitve pa pojasni, zakaj je število rojstev najmanjše v omenjenih regijah. Primorsko-notranjska je v obravnavanem letu dosegla najmanjše število, kljub temu, da je precej obsežna. Zasavska regija je najmanjša, a očitno precej gosto poseljena. To se mi zdi precej zanimivo, saj sem pričakovala, da bo število rojenih otrok bolj sorazmerno z velikostjo regij.

```{r zemljevid1, fig.align='center'}
print(zem.reg)
```

Graf spodaj prikazuje število živorojenih rojenih otrok v nekaterih slovenskih regijah. Izbrala sem tiste z najvišjimi in najnižjimi povprečnimi vrednostmi in se ujemajo s tistimi, ki sem jih omenila ob zemljevidu (le da sem izključila Koroško regijo). Razlika med regijama z najvišjimi vrednostmi je precejšnja, medtem ko sta si regiji z nižjimi vrednostmi skozi celotno desetletje zelo blizu. Dobro je razvidno, da je število rojstev v obdobju kar precej padlo, kar pa ne drži za Zasavsko regijo.

```{r graf1, fig.align='center'}
print(graf.reg)
```

Podoben prikaz kot za slovenske regije sem želela narediti še za evropske države. Tudi tu sem v graf vključila tiste države, ki bolj odstopajo od povprečja. Zaradi pomanjkanja podatkov sem izpustila Rusijo (ki ima sicer daleč najvišje število rojenih otrok) in Andoro (zelo majhne vrednosti), zaradi boljše preglednosti pa tudi Turčijo, ki je prav tako dosegala zelo velike številke. Vidi se, da je največje število rojstev skozi celotno desetletje dosegala Francija, zelo blizu pa je tudi Velika Britanija. Gre za precej veliki državi, zato me podatek ne preseneča. Najmanjše vrednosti je dosegel Lihtenštajn (zelo majhna država) in Estonija, ki ima precej podobne vrednosti kot Slovenija. Hrvaška pa ima dokaj višje število rojenih otrok, saj je tudi precej večja. Razlike med spodnjimi državami bi bile mnogo bolj razvidne, če bi bile prikazane v ločenem grafu. 
Tudi tu pa je lepo razviden padec števila rojenih otrok.

```{r graf2, fig.align='center'}
print(graf.evr)
```

Število živorojenih otrok sem želela prikazati še malo drugače, da se lepše vidi primerjava med vsemi državami. Spet sem jih zaradi pomanjkanja podatkov morala nekaj izpustiti (Ukrajina, San Marino, Rusija, Moldavija, Kosovo, Bosna in Hercegovina, Albanija, Lihtenštajn in Andora). Primerjala sem število rojenih otrok v obeh mejah obravnavanega obdobja. Tu se vidi prednjačenje Turčije in izredno manjše številke pri manjših državah. Spet se vidi padec števila rojstev v večini držav. Z navpičnimi črtami sem ponazorila še povprečji za obe leti.

```{r graf3, fig.align='center'}
print(graf.evr2)
```

Zadnji graf se s podatki vrača v Slovenijo in prikazuje, kakšna je sestava letnih rojstev glede na mesece. Podatki so me precej presenetili, saj sem pričakovala, da bodo števila bolj enakovredna. Precejšen vpliv ima število dni v posameznem mesecu, kar najbolje prikazuje krivulja za mesec februar, ki se nahaja čisto na dnu. Popolnoma razumljivo pa je, da krivulje skozi leta precej nihajo, torej sestava nikakor ni konsistentna. Kot na vseh prikazih se tudi tu vidi padec števila živorojenih otrok, a je tu to morda najlepše vidno zaradi manjših vrednosti.

```{r graf4, fig.align='center'}
print(graf.mes)
```


# Napredna analiza podatkov

***
